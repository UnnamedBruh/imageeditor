<html>
<head></head>
<body>
<img id="image" style="display: none">
<input id="file" type="file" accept="image/png, image/jpeg, image/jpg, image/gif, image/webp, image/svg">
<div id="editor">
	<canvas id="currentimage"></canvas>
	<br>
	<select id="effect">
		<option id="apply" style="color: grey" hidden>Select Effect</option>
		<option disabled style="color: red">Filters</option>
		<option disabled style="color: darkred">Color Filters</option>
		<option>R</option>
		<option>G</option>
		<option>B</option>
		<option>Grayscale (by Brightness)</option>
		<option>Grayscale (by Average)</option>
		<option disabled style="color: darkred">Opacity Filters</option>
		<option>Anti-Transparency</option>
	</select>
	<br>
	<a id="currenteffect"></a>
	<br>
	<button id="apply">Apply Effect</button>
</div>
<script>
	const fileInput = document.getElementById('file');
	const imageElement = document.getElementById('image');
	const editor = document.getElementById('editor');
	const canvas = document.getElementById('currentimage');
	const ctx = canvas.getContext('2d');
	const effectSelect = document.getElementById('effect');
	const currentEffect = document.getElementById('currenteffect');
	const applyEffectButton = document.getElementById('apply');
	fileInput.addEventListener('change', function () {
		const file = fileInput.files[0];
		if (file) {
			const reader = new FileReader();
			reader.onload = function (e) {
				imageElement.src = e.target.result;
				imageElement.style.display = 'none';
				editor.style.display = 'block';
				const img = new Image();
				img.onload = function () {
					canvas.width = img.width;
					canvas.height = img.height;
					ctx.drawImage(img, 0, 0);
				};
				img.src = e.target.result;
			};
			reader.readAsDataURL(file);
		}
	});
	applyEffectButton.addEventListener('click', function () {
		const effect = effectSelect.value;
		const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);
		const data = imgData.data;
		switch (effect) {
			case 'R':
				for (let i = 0; i < data.length; i += 4) {
					data[i + 1] = 0; // Green channel
					data[i + 2] = 0; // Blue channel
				}
				break;
			case 'G':
				for (let i = 0; i < data.length; i += 4) {
					data[i] = 0;	 // Red channel
					data[i + 2] = 0; // Blue channel
				}
				break;
			case 'B':
				for (let i = 0; i < data.length; i += 4) {
					data[i] = 0;	 // Red channel
					data[i + 1] = 0; // Green channel
				}
				break;
			case 'Grayscale (by Brightness)':
				for (let i = 0; i < data.length; i += 4) {
					const brightness = (0.34 * data[i]) + (0.5 * data[i + 1]) + (0.16 * data[i + 2]);
					data[i] = data[i + 1] = data[i + 2] = brightness;
				}
				break;
			case 'Grayscale (by Average)':
				for (let i = 0; i < data.length; i += 4) {
					const avg = (data[i] + data[i + 1] + data[i + 2]) / 3;
					data[i] = data[i + 1] = data[i + 2] = avg;
				}
				break;
			case 'Anti-Transparency':
				for (let i = 3; i < data.length; i += 4) {
					data[i] = 255;
				}
				break;
		}
		ctx.putImageData(imgData, 0, 0);
		currentEffect.textContent = `Current Effect: ${effect}`;
	});
</script>
</body>
</html>
